<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel = "stylesheet" type = "text/css" href = "css/game.css">
<link href="https://fonts.googleapis.com/css?family=Cuprum|Sigmar+One" rel="stylesheet">
    <title>CONNECT4!</title>
  </head>

  <style media="screen">
  </style>
  <body>
    <h1>Connect Four</h1>

    <p class="info">Connect4 is a <strong>two player</strong> game, no AI involved. Select a color and click 'start game' to begin. The winner is determined by whomever gets <strong>4 pieces in a row</strong> (horizontally, vertically, diagonally). <br> <button id = "startGame" onclick = "startGame()">Start Game</button> <button id = "restartGame" onclick = "restartGame()">Try Again</button></p>

    <div class = "player1"><span class = "chip"></span><br>Player 1
      <button id = "p1ColorChange" onclick="document.querySelector('div.player1').style.color = changeColor(colorPalette2)">Select Color</button>
    </div>

    <div class = "player2"><span class = "chip"></span><br>Player 2
      <button id = "p2ColorChange" onclick="document.querySelector('div.player2').style.color = changeColor(colorPalette1)">Select Color</button>
    </div>

  <div id="game-base">
    <div id="game-table">

    </div>
  </div><!-- end base -->

  <script>

let gameField = new Array();
let board = document.getElementById("game-table");
let currCol;
let currRow;
let currPlayer;
const player1 = 1;
const player2 = 2;

newGame();

/*function that creates the 6x7 board
2D array, each index with a number in it representing the 'value' of that position
0 - empty
1 - player1
2 - player2
*/
function prepareField(){
  gameField = new Array();

  for(let row = 0; row < 6; row++){
    gameField[row] = new Array();

    for(let col = 0; col < 7; col++){
      gameField[row].push(0);
    }
  }
}

/*initialize the board and starts a new game.
  randNum = randommize who goes first
*/
function newGame(){
  prepareField();
  let randNum = (Math.floor(Math.random() * 2) + 1);
  placeDisc(randNum);
}

function startGame() {
	document.getElementById("p1ColorChange").style.visibility = "hidden"; //hides the buttons to change colors, so that the players cant change colors during the game
  	document.getElementById("p2ColorChange").style.visibility = "hidden";
  	document.getElementById("restartGame").style.visibility = "visible";
  	document.getElementById("startGame").style.visibility = "hidden";
}

function restartGame() {
	document.getElementById("p1ColorChange").style.visibility = "visible";
  	document.getElementById("p2ColorChange").style.visibility = "visible";
    document.getElementById("restartGame").style.visibility = "hidden";
  	document.getElementById("startGame").style.visibility = "visible";
}

//function that places the disc in its respective position but doesn't display on screen
function placeDisc(row,col){
  // TODO:
}

//function that creates the disc
function makeDisc(player){
  // TODO:
}

let p1 = document.querySelector("#p1ColorChange");
let p2 = document.querySelector("#p2ColorChange");

//default color values for the player
let colorPalette1 = ["#ff9999", "#CC0000", "#800000"];
let colorPalette2 = ["#99e6ff", "#0099cc", "#006080"];

let index = 0;

//sets the color of the disc when the user clicks a button
function changeColor(array) {
 	index++;

 	if (index == 3)
 		index = 0;

	return array[index]
}

//changes the chip color depending on which button was pressed
function changeChipColor (p) {
	let chip = document.querySelectorAll('span.chip');
	let p1Color = document.querySelector("div.player1");
	let p2Color = document.querySelector("div.player2");

	if (p == 1)
		chip[0].style.backgroundColor = p1Color.style.color;

	else if (p == 2)
		chip[1].style.backgroundColor = p2Color.style.color;
}

p1.addEventListener("click", () => {changeChipColor(1); }, false);
p2.addEventListener("click", () => {changeChipColor(2); }, false);

  </script>
  </body>
</html>